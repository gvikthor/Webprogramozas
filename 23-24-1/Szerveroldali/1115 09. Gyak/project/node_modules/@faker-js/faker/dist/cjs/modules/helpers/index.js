"use strict";var j=Object.create;var T=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var D=(a,o,e)=>o in a?T(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e;var H=(a,o)=>{for(var e in o)T(a,e,{get:o[e],enumerable:!0})},S=(a,o,e,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of F(o))!O.call(a,n)&&n!==e&&T(a,n,{get:()=>o[n],enumerable:!(t=q(o,n))||t.enumerable});return a};var U=(a,o,e)=>(e=a!=null?j(L(a)):{},S(o||!a||!a.__esModule?T(e,"default",{value:a,enumerable:!0}):e,a)),z=a=>S(T({},"__esModule",{value:!0}),a);var C=(a,o,e)=>(D(a,typeof o!="symbol"?o+"":o,e),e);var W={};H(W,{HelpersModule:()=>B,SimpleHelpersModule:()=>P});module.exports=z(W);var h=require("../../errors/faker-error"),A=require("../../internal/deprecated"),G=require("../../internal/module-base"),v=require("./luhn-check"),V=U(require("./unique"));function I(a,o,e,t){let n=1;if(o)switch(o){case"?":{n=a.datatype.boolean()?0:1;break}case"*":{let r=1;for(;a.datatype.boolean();)r*=2;n=a.number.int({min:0,max:r});break}case"+":{let r=1;for(;a.datatype.boolean();)r*=2;n=a.number.int({min:1,max:r});break}default:throw new h.FakerError("Unknown quantifier symbol provided.")}else e!=null&&t!=null?n=a.number.int({min:Number.parseInt(e),max:Number.parseInt(t)}):e!=null&&t==null&&(n=Number.parseInt(e));return n}function K(a,o=""){const e=/(.)\{(\d+),(\d+)\}/,t=/(.)\{(\d+)\}/,n=/\[(\d+)-(\d+)\]/;let r,i,c,s,l=e.exec(o);for(;l!=null;)r=Number.parseInt(l[2]),i=Number.parseInt(l[3]),r>i&&(c=i,i=r,r=c),s=a.number.int({min:r,max:i}),o=o.slice(0,l.index)+l[1].repeat(s)+o.slice(l.index+l[0].length),l=e.exec(o);for(l=t.exec(o);l!=null;)s=Number.parseInt(l[2]),o=o.slice(0,l.index)+l[1].repeat(s)+o.slice(l.index+l[0].length),l=t.exec(o);for(l=n.exec(o);l!=null;)r=Number.parseInt(l[1]),i=Number.parseInt(l[2]),r>i&&(c=i,i=r,r=c),o=o.slice(0,l.index)+a.number.int({min:r,max:i}).toString()+o.slice(l.index+l[0].length),l=n.exec(o);return o}class P extends G.SimpleModuleBase{constructor(){super(...arguments);C(this,"uniqueStore",{})}slugify(e=""){return e.normalize("NFKD").replace(/[\u0300-\u036F]/g,"").replace(/ /g,"-").replace(/[^\w.-]+/g,"")}replaceSymbolWithNumber(e="",t="#"){let n="";for(let r=0;r<e.length;r++)e.charAt(r)===t?n+=this.faker.number.int(9):e.charAt(r)==="!"?n+=this.faker.number.int({min:2,max:9}):n+=e.charAt(r);return n}replaceSymbols(e=""){const t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];let n="";for(let r=0;r<e.length;r++)e.charAt(r)==="#"?n+=this.faker.number.int(9):e.charAt(r)==="?"?n+=this.arrayElement(t):e.charAt(r)==="*"?n+=this.faker.datatype.boolean()?this.arrayElement(t):this.faker.number.int(9):n+=e.charAt(r);return n}replaceCreditCardSymbols(e="6453-####-####-####-###L",t="#"){e=K(this.faker,e),e=this.replaceSymbolWithNumber(e,t);const n=(0,v.luhnCheckValue)(e);return e.replace("L",String(n))}regexpStyleStringParse(e=""){return(0,A.deprecated)({deprecated:"faker.helpers.regexpStyleStringParse",proposed:"faker.helpers.fromRegExp",since:"8.1",until:"9.0"}),K(this.faker,e)}fromRegExp(e){var g,y;let t=!1;e instanceof RegExp&&(t=e.flags.includes("i"),e=e.toString(),e=(y=(g=/\/(.+?)\//.exec(e))==null?void 0:g[1])!=null?y:"");let n,r,i;const c=/([.A-Za-z0-9])(?:\{(\d+)(?:,(\d+)|)\}|(\?|\*|\+))(?![^[]*]|[^{]*})/;let s=c.exec(e);for(;s!=null;){const k=s[2],w=s[3],x=s[4];i=I(this.faker,x,k,w),e=e.slice(0,s.index)+s[1].repeat(i)+e.slice(s.index+s[0].length),s=c.exec(e)}const l=/(\d-\d|\w-\w|\d|\w|[-!@#$&()`.+,/"])/,R=/\[(\^|)(-|)(.+?)\](?:\{(\d+)(?:,(\d+)|)\}|(\?|\*|\+)|)/;for(s=R.exec(e);s!=null;){const k=s[1]==="^",w=s[2]==="-",x=s[4],_=s[5],M=s[6],m=[];let E=s[3],b=l.exec(E);for(w&&m.push(45);b!=null;){if(b[0].includes("-")){const f=b[0].split("-").map(u=>u.charCodeAt(0));if(n=f[0],r=f[1],n>r)throw new h.FakerError("Character range provided is out of order.");for(let u=n;u<=r;u++)if(t&&Number.isNaN(Number(String.fromCharCode(u)))){const N=String.fromCharCode(u);m.push(N.toUpperCase().charCodeAt(0),N.toLowerCase().charCodeAt(0))}else m.push(u)}else t&&Number.isNaN(Number(b[0]))?m.push(b[0].toUpperCase().charCodeAt(0),b[0].toLowerCase().charCodeAt(0)):m.push(b[0].charCodeAt(0));E=E.substring(b[0].length),b=l.exec(E)}if(i=I(this.faker,M,x,_),k){let f=-1;for(let u=48;u<=57;u++){if(f=m.indexOf(u),f>-1){m.splice(f,1);continue}m.push(u)}for(let u=65;u<=90;u++){if(f=m.indexOf(u),f>-1){m.splice(f,1);continue}m.push(u)}for(let u=97;u<=122;u++){if(f=m.indexOf(u),f>-1){m.splice(f,1);continue}m.push(u)}}const $=this.multiple(()=>String.fromCharCode(this.arrayElement(m)),{count:i}).join("");e=e.slice(0,s.index)+$+e.slice(s.index+s[0].length),s=R.exec(e)}const d=/(.)\{(\d+),(\d+)\}/;for(s=d.exec(e);s!=null;){if(n=Number.parseInt(s[2]),r=Number.parseInt(s[3]),n>r)throw new h.FakerError("Numbers out of order in {} quantifier.");i=this.faker.number.int({min:n,max:r}),e=e.slice(0,s.index)+s[1].repeat(i)+e.slice(s.index+s[0].length),s=d.exec(e)}const p=/(.)\{(\d+)\}/;for(s=p.exec(e);s!=null;)i=Number.parseInt(s[2]),e=e.slice(0,s.index)+s[1].repeat(i)+e.slice(s.index+s[0].length),s=p.exec(e);return e}shuffle(e,t={}){const{inplace:n=!1}=t;n||(e=[...e]);for(let r=e.length-1;r>0;--r){const i=this.faker.number.int(r);[e[r],e[i]]=[e[i],e[r]]}return e}uniqueArray(e,t){if(Array.isArray(e)){const i=[...new Set(e)];return this.shuffle(i).splice(0,t)}const n=new Set;try{if(typeof e=="function"){const r=1e3*t;let i=0;for(;n.size<t&&i<r;)n.add(e()),i++}}catch{}return[...n]}mustache(e,t){if(e==null)return"";for(const n in t){const r=new RegExp(`{{${n}}}`,"g");let i=t[n];typeof i=="string"&&(i=i.replace(/\$/g,"$$$$")),e=e.replace(r,i)}return e}maybe(e,t={}){if(this.faker.datatype.boolean(t))return e()}objectKey(e){const t=Object.keys(e);return this.arrayElement(t)}objectValue(e){const t=this.faker.helpers.objectKey(e);return e[t]}objectEntry(e){const t=this.faker.helpers.objectKey(e);return[t,e[t]]}arrayElement(e){if(e==null)throw new h.FakerError("Calling `faker.helpers.arrayElement()` without arguments is no longer supported.");if(e.length===0)throw new h.FakerError("Cannot get value from empty dataset.");const t=e.length>1?this.faker.number.int({max:e.length-1}):0;return e[t]}weightedArrayElement(e){if(e.length===0)throw new h.FakerError("weightedArrayElement expects an array with at least one element");if(!e.every(i=>i.weight>0))throw new h.FakerError("weightedArrayElement expects an array of { weight, value } objects where weight is a positive number");const t=e.reduce((i,{weight:c})=>i+c,0),n=this.faker.number.float({min:0,max:t,precision:1e-9});let r=0;for(const{weight:i,value:c}of e)if(r+=i,n<r)return c;return e[e.length-1].value}arrayElements(e,t){if(e==null)throw new h.FakerError("Calling `faker.helpers.arrayElements()` without arguments is no longer supported.");if(e.length===0)return[];const n=this.rangeToNumber(t!=null?t:{min:1,max:e.length});if(n>=e.length)return this.shuffle(e);if(n<=0)return[];const r=[...e];let i=e.length;const c=i-n;let s,l;for(;i-- >c;)l=this.faker.number.int(i),s=r[l],r[l]=r[i],r[i]=s;return r.slice(c)}enumValue(e){const t=Object.keys(e).filter(r=>Number.isNaN(Number(r))),n=this.arrayElement(t);return e[n]}rangeToNumber(e){return typeof e=="number"?e:this.faker.number.int(e)}unique(e,t=[],n={}){(0,A.deprecated)({deprecated:"faker.helpers.unique",proposed:"https://github.com/faker-js/faker/issues/1785#issuecomment-1407773744",since:"8.0",until:"9.0"});const{maxTime:r=50,maxRetries:i=50,exclude:c=[],store:s=this.uniqueStore}=n;return V.exec(e,t,{...n,startTime:Date.now(),maxTime:r,maxRetries:i,currentIterations:0,exclude:c,store:s})}multiple(e,t={}){var r;const n=this.rangeToNumber((r=t.count)!=null?r:3);return n<=0?[]:Array.from({length:n},e)}}class B extends P{constructor(e){super(e);this.faker=e}fake(e){e=typeof e=="string"?e:this.arrayElement(e);const t=e.search(/{{[a-z]/),n=e.indexOf("}}",t);if(t===-1||n===-1)return e;let i=e.substring(t+2,n+2).replace("}}","").replace("{{","");const c=/\(([^)]*)\)/,s=c.exec(i);let l="";s&&(i=i.replace(c,""),l=s[1]);const R=i.split(".");let d=this.faker,p=this.faker.rawDefinitions;for(const x of R)d=d==null?void 0:d[x],p=p==null?void 0:p[x];let g;if(typeof d=="function")g=d;else if(Array.isArray(p))g=()=>this.faker.helpers.arrayElement(p);else throw new h.FakerError(`Invalid module method or definition: ${i}
- faker.${i} is not a function
- faker.definitions.${i} is not an array`);g=g.bind(this);let y;try{y=JSON.parse(`[${l}]`)}catch{y=[l]}const k=String(g(...y)),w=e.substring(0,t)+k+e.substring(n+2);return this.fake(w)}}0&&(module.exports={HelpersModule,SimpleHelpersModule});
